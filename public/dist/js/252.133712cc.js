"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[252],{9252:(t,n,e)=>{e.r(n),e.d(n,{default:()=>L});var o=e(3673);const a={class:"layout-page"},c=(0,o._)("div",null,"Список контактов",-1),i={key:1,class:"flex flex-center q-py-md"};function l(t,n,e,l,s,r){const u=(0,o.up)("q-card-section"),d=(0,o.up)("contact-list-item"),p=(0,o.up)("q-list"),C=(0,o.up)("q-spinner"),m=(0,o.up)("q-btn"),g=(0,o.up)("q-card-actions"),f=(0,o.up)("q-card"),k=(0,o.up)("router-view"),w=(0,o.up)("q-page-sticky"),v=(0,o.up)("q-page"),h=(0,o.up)("q-page-container"),_=(0,o.up)("q-layout");return(0,o.wg)(),(0,o.j4)(_,{class:"bg-grey-2"},{default:(0,o.w5)((()=>[(0,o.Wm)(h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(v,{class:"flex flex-center"},{default:(0,o.w5)((()=>[(0,o._)("div",a,["contacts"===t.$route.name?((0,o.wg)(),(0,o.j4)(f,{key:0,bordered:"",flat:""},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{class:"text-h6"},{default:(0,o.w5)((()=>[c])),_:1}),0!==t.$store.state.Contacts.contacts.length?((0,o.wg)(),(0,o.j4)(p,{key:0,separator:""},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.$store.state.Contacts.contacts,(n=>((0,o.wg)(),(0,o.j4)(d,{onOnContactClick:e=>t.$router.push({name:"contacts.id",params:{id:n.id}}),onOnFavoritesToggle:l.toggleFavorites,onOnContactEdit:l.editContact,onOnContactDelete:l.deleteContact,key:n.id,contact:n},null,8,["onOnContactClick","onOnFavoritesToggle","onOnContactEdit","onOnContactDelete","contact"])))),128))])),_:1})):((0,o.wg)(),(0,o.iD)("div",i,[(0,o.Wm)(C,{size:"24px"})])),(0,o.Wm)(g,{class:"q-mt-auto",align:"right"},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{color:"primary",class:"full-width",onClick:n[0]||(n[0]=n=>t.$router.push({name:"contacts.create"})),icon:"add",outline:"",label:"Добавить контакт"})])),_:1})])),_:1})):((0,o.wg)(),(0,o.j4)(k,{key:1}))]),(0,o.Wm)(w,{position:"bottom-right",offset:[16,16]},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{onClick:n[1]||(n[1]=n=>t.$store.dispatch("Auth/signout").then((()=>t.$router.push("auth")))),color:"accent",label:"Выйти"})])),_:1})])),_:1})])),_:1})])),_:1})}var s=e(8880),r=e(2323);const u={class:"row no-wrap"};function d(t,n,e,a,c,i){const l=(0,o.up)("q-icon"),d=(0,o.up)("q-btn"),p=(0,o.up)("q-item-section"),C=(0,o.up)("q-item-label"),m=(0,o.up)("q-item");return(0,o.wg)(),(0,o.j4)(m,{clickable:"",active:t.contact.id.toString()===t.$route.params.id,onClick:t.onContactClick},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{avatar:""},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{onClick:(0,s.iM)(t.onFavoritesToggle,["stop"]),color:"orange",round:"",flat:""},{default:(0,o.w5)((()=>[(0,o.Wm)(l,{name:t.contact.is_favorite?"star":"star_border"},null,8,["name"])])),_:1},8,["onClick"])])),_:1}),(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Wm)(C,{class:"ellipsis"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(t.contact.name),1)])),_:1}),(0,o.Wm)(C,{class:"ellipsis",caption:""},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(t.contact.phone),1)])),_:1})])),_:1}),(0,o.Wm)(p,{side:""},{default:(0,o.w5)((()=>[(0,o._)("div",u,[(0,o.Wm)(d,{onClick:(0,s.iM)(t.onContactEdit,["stop"]),round:"",unelevated:"",flat:"",color:"primary",icon:"edit"},null,8,["onClick"]),(0,o.Wm)(d,{onClick:(0,s.iM)(t.onContactDelete,["stop"]),round:"",unelevated:"",flat:"",color:"negative",icon:"delete"},null,8,["onClick"])])])),_:1})])),_:1},8,["active","onClick"])}var p=e(9582);const C=(0,o.aZ)({name:"ContactListItem",emits:["onContactDelete","onContactEdit","onFavoritesToggle","onContactClick"],props:{contact:{type:Object,required:!0}},setup(t,{emit:n}){const e=(0,p.tv)();function o(){n("onContactDelete",t.contact.id)}function a(){n("onContactEdit",t.contact.id)}function c(){n("onFavoritesToggle",t.contact)}function i(){e.push({name:"contacts.id",params:{id:t.contact.id}}),n("onContactClick",t.contact.id)}return{onContactDelete:o,onContactEdit:a,onFavoritesToggle:c,onContactClick:i}}});var m=e(4260),g=e(3414),f=e(2035),k=e(8240),w=e(4554),v=e(2350),h=e(7518),_=e.n(h);const Z=(0,m.Z)(C,[["render",d]]),q=Z;_()(C,"components",{QItem:g.Z,QItemSection:f.Z,QBtn:k.Z,QIcon:w.Z,QItemLabel:v.Z});var y=e(8825),W=e(3617);const b={name:"Contacts",components:{ContactListItem:q},setup(){const t=(0,y.Z)(),n=(0,p.tv)(),e=(0,W.oR)();(0,o.wF)((()=>{e.dispatch("Contacts/getContacts")}));const a=n=>{t.dialog({title:e.state.Contacts.contacts.filter((t=>t.id===n))[0].name,message:"Вы действительно хотите удалить этот контакт?",cancel:{outline:!0,label:"Отмена"},ok:{color:"negative",label:"Удалить"}}).onOk((()=>{e.dispatch("Contacts/deleteContactById",n)}))},c=t=>{n.push({name:"contacts.id.edit",params:{id:t}})},i=t=>{e.dispatch("Contacts/toggleFavoriteById",t)};return{deleteContact:a,editContact:c,toggleFavorites:i}}};var Q=e(3066),F=e(2652),O=e(4379),D=e(151),I=e(5589),$=e(7011),j=e(9754),x=e(9367),E=e(1007);const T=(0,m.Z)(b,[["render",l]]),L=T;_()(b,"components",{QLayout:Q.Z,QPageContainer:F.Z,QPage:O.Z,QCard:D.Z,QCardSection:I.Z,QList:$.Z,QSpinner:j.Z,QCardActions:x.Z,QBtn:k.Z,QPageSticky:E.Z})}}]);